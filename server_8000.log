INFO:     Will watch for changes in these directories: ['/Users/alan/GitHub/agent-platform']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [39450] using WatchFiles
INFO:     Started server process [39508]
INFO:     Waiting for application startup.
2025-12-10 16:43:53,434 - apscheduler.scheduler - INFO - Scheduler started
2025-12-10 16:43:53,434 - app.services.scheduler_service - INFO - 스케줄러 시작됨
2025-12-10 16:43:53,434 - app.main - INFO - Scheduler started
2025-12-10 16:43:53,434 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-12-10 16:43:53,435 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
INFO:     Application startup complete.
INFO:     127.0.0.1:50739 - "POST /api/assist/analyze HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/fastapi/applications.py", line 1139, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/fastapi/routing.py", line 120, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/fastapi/routing.py", line 106, in app
    response = await f(request)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/fastapi/routing.py", line 420, in app
    solved_result = await solve_dependencies(
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/fastapi/dependencies/utils.py", line 669, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/starlette/concurrency.py", line 38, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
  File "/Users/alan/GitHub/agent-platform/app/repositories/proposal_repository.py", line 42, in get_proposal_repository
    _repo_instance = ProposalRepository()
  File "/Users/alan/GitHub/agent-platform/app/repositories/proposal_repository.py", line 19, in __init__
    self.redis = redis.from_url(self.settings.redis_url, decode_responses=True)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/redis/asyncio/utils.py", line 16, in from_url
    return Redis.from_url(url, **kwargs)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/redis/asyncio/client.py", line 177, in from_url
    connection_pool = ConnectionPool.from_url(url, **kwargs)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/redis/asyncio/connection.py", line 1145, in from_url
    return cls(**kwargs)
  File "/Users/alan/GitHub/agent-platform/venv/lib/python3.9/site-packages/redis/asyncio/connection.py", line 1164, in __init__
    self._lock = asyncio.Lock()
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/locks.py", line 81, in __init__
    self._loop = events.get_event_loop()
  File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/asyncio/events.py", line 642, in get_event_loop
    raise RuntimeError('There is no current event loop in thread %r.'
RuntimeError: There is no current event loop in thread 'AnyIO worker thread'.
WARNING:  WatchFiles detected changes in 'app/repositories/proposal_repository.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-12-10 16:44:22,466 - app.services.scheduler_service - INFO - 스케줄러 종료됨
2025-12-10 16:44:22,466 - app.main - INFO - Scheduler stopped
2025-12-10 16:44:22,466 - apscheduler.scheduler - INFO - Scheduler has been shut down
INFO:     Application shutdown complete.
INFO:     Finished server process [39508]
INFO:     Started server process [40598]
INFO:     Waiting for application startup.
2025-12-10 16:44:23,348 - apscheduler.scheduler - INFO - Scheduler started
2025-12-10 16:44:23,348 - app.services.scheduler_service - INFO - 스케줄러 시작됨
2025-12-10 16:44:23,348 - app.main - INFO - Scheduler started
2025-12-10 16:44:23,348 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-12-10 16:44:23,348 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
INFO:     Application startup complete.
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-12-10 16:44:48,426 - app.services.scheduler_service - INFO - 스케줄러 종료됨
2025-12-10 16:44:48,426 - app.main - INFO - Scheduler stopped
2025-12-10 16:44:48,426 - apscheduler.scheduler - INFO - Scheduler has been shut down
INFO:     Application shutdown complete.
INFO:     Finished server process [40598]
INFO:     Stopping reloader process [39450]
