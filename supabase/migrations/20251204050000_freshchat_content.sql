-- ============================================
-- Freshchat 학습 콘텐츠
-- Date: 2025-12-04
-- 5개 모듈 × 3레벨 (기초/중급/고급)
-- ============================================

-- Module UUIDs:
-- live-chat-setup: 5e6cb2b7-9f67-45e9-923b-ccb6c99d9d1d
-- chatbot: d18d21c1-4a71-411a-89b7-4f344ebb3c99
-- messaging-channels: 40cbc806-4975-49af-beb7-ced9bc86d0f3
-- team-routing: 04d8e2e6-23e2-459d-b1e4-e256be7b4be1
-- campaigns: 1fef628a-a680-4988-8ac8-e4cf9b1247a9

-- ============================================
-- 1. 실시간 채팅 설정 (live-chat-setup)
-- ============================================

INSERT INTO module_contents (module_id, section_type, level, title_ko, content_md, display_order, estimated_minutes) VALUES
('5e6cb2b7-9f67-45e9-923b-ccb6c99d9d1d', 'overview', 'basic', '실시간 채팅의 가치', 
$CONTENT$
## 💬 왜 실시간 채팅인가?

### 고객이 채팅을 선호하는 이유

| 이메일 | 채팅 |
|--------|------|
| 답변까지 수 시간~일 | 즉시 응답 |
| 형식적인 소통 | 자연스러운 대화 |
| 한 번에 많은 정보 필요 | 대화하며 해결 |
| 기다리는 동안 다른 일 불가 | 멀티태스킹 가능 |

### Freshchat의 강점

```
🚀 빠른 응답: 실시간 양방향 소통
🤖 AI 챗봇: 24/7 자동 응대
📱 멀티채널: 웹, 앱, 메신저 통합
📊 분석: 대화 품질 측정
```

### 채팅 vs 챗봇

| 구분 | 실시간 채팅 | 챗봇 |
|------|------------|------|
| 응대자 | 에이전트 | AI/규칙 기반 |
| 가용 시간 | 근무 시간 | 24/7 |
| 복잡한 문의 | ✅ 적합 | ❌ 한계 |
| 단순 FAQ | 가능하나 비효율 | ✅ 최적 |
$CONTENT$, 1, 5),

('5e6cb2b7-9f67-45e9-923b-ccb6c99d9d1d', 'concept', 'basic', '채팅 위젯 이해', 
$CONTENT$
## 🔲 Freshchat 위젯

### 위젯이란?

웹사이트나 앱에 표시되는 **채팅 버튼과 대화창**입니다.

### 위젯 구성 요소

```
┌─────────────────────────────┐
│  💬 무엇을 도와드릴까요?      │  ← 환영 메시지
├─────────────────────────────┤
│                             │
│  [FAQ 검색]                 │  ← 셀프서비스
│                             │
│  [채팅 시작하기]             │  ← 대화 시작
│                             │
└─────────────────────────────┘
        💬                      ← 런처 버튼
```

### 위젯 표시 위치

- **웹사이트**: 우측 하단 (기본)
- **모바일 앱**: SDK 통합
- **제품 내**: 특정 페이지에만

### 커스터마이징 옵션

| 요소 | 설정 |
|------|------|
| 색상 | 브랜드 컬러 |
| 위치 | 좌/우 하단 |
| 언어 | 다국어 지원 |
| 로고 | 회사 로고 |
$CONTENT$, 2, 8),

('5e6cb2b7-9f67-45e9-923b-ccb6c99d9d1d', 'practice', 'basic', '위젯 설치하기', 
$CONTENT$
## ✏️ Freshchat 위젯 설치 실습

### 1단계: 위젯 코드 복사

**Admin** → **Web Widget** → **Install** → 코드 복사

```html
<!-- Freshchat Widget Code -->
<script>
  function initFreshChat() {
    window.fcWidget.init({
      token: "YOUR_TOKEN_HERE",
      host: "https://wchat.freshchat.com"
    });
  }
</script>
<script src="https://wchat.freshchat.com/js/widget.js" 
        onload="initFreshChat()"></script>
```

### 2단계: 웹사이트에 삽입

`</body>` 태그 바로 위에 붙여넣기

### 3단계: 기본 설정

```javascript
window.fcWidget.init({
  token: "YOUR_TOKEN",
  host: "https://wchat.freshchat.com",
  config: {
    headerProperty: {
      appName: "우리 회사 지원",
      appLogo: "https://example.com/logo.png",
      backgroundColor: "#0066FF"
    }
  }
});
```

### 4단계: 테스트

1. 웹사이트 새로고침
2. 우측 하단 채팅 버튼 확인
3. 클릭하여 대화창 열기
4. 테스트 메시지 전송
$CONTENT$, 3, 10),

('5e6cb2b7-9f67-45e9-923b-ccb6c99d9d1d', 'overview', 'intermediate', '위젯 고급 설정', 
$CONTENT$
## ⚙️ 위젯 커스터마이징

### 조건부 표시

특정 페이지/사용자에게만 위젯 표시:

```javascript
// 로그인 사용자에게만 표시
if (user.isLoggedIn) {
  fcWidget.init({...});
}

// 특정 페이지 제외
if (!window.location.pathname.includes('/checkout')) {
  fcWidget.init({...});
}
```

### 사용자 정보 전달

```javascript
fcWidget.setExternalId(user.id);
fcWidget.user.setFirstName(user.firstName);
fcWidget.user.setEmail(user.email);
fcWidget.user.setProperties({
  plan: "Enterprise",
  company: "ABC Corp",
  signupDate: "2024-01-15"
});
```

### 이벤트 트리거

```javascript
// 특정 조건에서 채팅 자동 열기
if (user.isStuck) {
  fcWidget.open();
}

// 프로액티브 메시지
fcWidget.open({
  replyText: "결제에 문제가 있으신가요?"
});
```
$CONTENT$, 1, 12),

('5e6cb2b7-9f67-45e9-923b-ccb6c99d9d1d', 'overview', 'advanced', '멀티사이트 운영', 
$CONTENT$
## 🌐 다중 사이트 관리

### 시나리오

- 여러 브랜드/제품 사이트 운영
- 각 사이트별 다른 에이전트 팀
- 통합 관리 필요

### 설정 방법

#### 1. 사이트별 위젯 설정
```javascript
// Site A
fcWidget.init({
  token: "TOKEN_A",
  tags: ["site-a", "product-x"]
});

// Site B
fcWidget.init({
  token: "TOKEN_B", 
  tags: ["site-b", "product-y"]
});
```

#### 2. 라우팅 규칙
- 태그 기반으로 적절한 그룹에 배정
- Site A → 팀 A
- Site B → 팀 B

#### 3. 리포팅
- 사이트별 대화량 분석
- 통합 대시보드에서 비교
$CONTENT$, 1, 10);


-- ============================================
-- 2. 챗봇 구성 (chatbot)
-- ============================================

INSERT INTO module_contents (module_id, section_type, level, title_ko, content_md, display_order, estimated_minutes) VALUES
('d18d21c1-4a71-411a-89b7-4f344ebb3c99', 'overview', 'basic', '챗봇의 역할', 
$CONTENT$
## 🤖 Freshchat 챗봇 소개

### 챗봇이 해결하는 문제

| 문제 | 챗봇 솔루션 |
|------|------------|
| 24/7 지원 불가 | 항상 응대 가능 |
| 반복 질문 피로 | 자동 답변 |
| 동시 문의 폭주 | 무제한 동시 처리 |
| 초기 정보 수집 시간 | 자동 수집 후 전달 |

### Freshchat 봇 유형

| 유형 | 설명 | 용도 |
|------|------|------|
| **Answer Bot** | FAQ 기반 자동 응답 | 단순 질문 |
| **Custom Bot** | 플로우 기반 대화 | 정보 수집, 안내 |
| **Freddy AI** | AI 기반 자연어 이해 | 복잡한 의도 파악 |

### 봇 + 에이전트 협업

```
고객 문의
    ↓
[봇] 초기 응대 + 정보 수집
    ↓
단순 문의? → [봇] 자동 해결
    ↓ (복잡한 문의)
[에이전트에게 전달] + 수집 정보 공유
```
$CONTENT$, 1, 5),

('d18d21c1-4a71-411a-89b7-4f344ebb3c99', 'concept', 'basic', '봇 플로우 기초', 
$CONTENT$
## 🔄 대화 플로우 설계

### 플로우 구성 요소

| 요소 | 설명 | 예시 |
|------|------|------|
| **메시지** | 봇이 보내는 텍스트 | "무엇을 도와드릴까요?" |
| **버튼** | 사용자 선택지 | [결제문의] [배송문의] |
| **입력** | 사용자 텍스트 입력 | 이메일 주소 수집 |
| **조건** | 분기 처리 | 회원/비회원 |
| **액션** | 시스템 동작 | 에이전트 연결 |

### 기본 플로우 예시

```
[시작]
    ↓
"안녕하세요! 무엇을 도와드릴까요?"
    ↓
[결제 문의] [배송 문의] [기타]
    ↓         ↓          ↓
"주문번호를  "송장번호를   에이전트
 알려주세요" 알려주세요"   연결
```

### 좋은 플로우의 조건

- ✅ 3클릭 이내 해결/전달
- ✅ 명확한 선택지
- ✅ 막다른 길 없음
- ✅ 언제든 에이전트 연결 가능
$CONTENT$, 2, 8),

('d18d21c1-4a71-411a-89b7-4f344ebb3c99', 'practice', 'basic', '첫 챗봇 만들기', 
$CONTENT$
## ✏️ 간단한 FAQ 봇 실습

### 시나리오
자주 묻는 3가지 질문에 자동 응답하는 봇

### 1단계: 봇 생성

**Admin** → **Bots** → **New Bot**
- 이름: "FAQ 도우미"
- 트리거: 대화 시작 시

### 2단계: 환영 메시지

```
👋 안녕하세요! FAQ 도우미입니다.
아래에서 궁금한 항목을 선택해주세요.
```

### 3단계: 버튼 추가

```
[🔐 비밀번호 재설정]
[📦 배송 조회]
[💳 결제 방법]
[💬 상담원 연결]
```

### 4단계: 각 버튼 응답 설정

**비밀번호 재설정 선택 시:**
```
비밀번호 재설정 방법:
1. 로그인 화면에서 "비밀번호 찾기" 클릭
2. 이메일 주소 입력
3. 발송된 링크에서 새 비밀번호 설정

도움이 되셨나요?
[😊 해결됨] [😔 추가 도움 필요]
```

### 5단계: 테스트 및 배포
$CONTENT$, 3, 12),

('d18d21c1-4a71-411a-89b7-4f344ebb3c99', 'overview', 'intermediate', 'Answer Bot 활용', 
$CONTENT$
## 📚 Answer Bot - AI 기반 FAQ

### Answer Bot이란?

지식 베이스 문서를 학습하여 **자동으로 관련 답변**을 제안합니다.

### 작동 원리

```
고객: "비밀번호를 바꾸고 싶어요"
    ↓
[Answer Bot] 의도 분석
    ↓
[지식 베이스 검색] "비밀번호 변경"
    ↓
"이 문서가 도움이 될까요?"
→ [비밀번호 변경 가이드] 제안
```

### 설정 방법

1. **지식 베이스 연결**
   - 기존 Freshdesk Solutions 연동
   - 또는 Freshchat 자체 FAQ 등록

2. **트리거 설정**
   - 모든 대화 시작 시
   - 또는 특정 키워드 감지 시

3. **폴백 설정**
   - 매칭 실패 시 → 에이전트 연결
   - 또는 추가 질문 유도
$CONTENT$, 1, 10),

('d18d21c1-4a71-411a-89b7-4f344ebb3c99', 'overview', 'advanced', 'Freddy AI 고급 활용', 
$CONTENT$
## 🧠 Freddy AI - 지능형 챗봇

### Freddy AI 기능

| 기능 | 설명 |
|------|------|
| **의도 감지** | 자연어에서 의도 파악 |
| **엔티티 추출** | 주문번호, 날짜 등 자동 인식 |
| **감정 분석** | 고객 감정 상태 파악 |
| **스마트 라우팅** | 적합한 에이전트 연결 |

### 커스텀 의도 학습

```
의도: "주문 취소"
학습 문장:
- "주문 취소하고 싶어요"
- "취소 어떻게 해요?"
- "주문한 거 안 살래요"
- "Cancel my order"
```

### 복합 시나리오

```
고객: "어제 주문한 노트북 취소하고 싶어요"
    ↓
[Freddy AI 분석]
- 의도: 주문 취소
- 엔티티: 상품=노트북, 시간=어제
    ↓
[백엔드 API 호출]
→ 어제 주문 중 노트북 검색
    ↓
"주문번호 #12345 노트북 주문을 
 취소하시겠습니까?"
[예] [아니오]
```
$CONTENT$, 1, 15);


-- ============================================
-- 3. 메시징 채널 통합 (messaging-channels)
-- ============================================

INSERT INTO module_contents (module_id, section_type, level, title_ko, content_md, display_order, estimated_minutes) VALUES
('40cbc806-4975-49af-beb7-ced9bc86d0f3', 'overview', 'basic', '메시징 앱 통합의 가치', 
$CONTENT$
## 📱 고객이 있는 곳에서 만나기

### 메시징 앱 사용 현황

전 세계 메신저 사용자: **30억+**

| 앱 | 주요 지역 | 월간 사용자 |
|-----|----------|------------|
| **WhatsApp** | 글로벌 | 20억+ |
| **Facebook Messenger** | 미주, 유럽 | 10억+ |
| **LINE** | 일본, 대만, 태국 | 1.8억 |
| **카카오톡** | 한국 | 5천만 |

### 통합의 장점

```
고객: 평소 쓰던 앱에서 편하게 문의
에이전트: Freshchat 하나에서 모든 채널 응대
관리자: 통합 리포팅으로 성과 분석
```

### 채널별 특성

| 채널 | 특성 | 적합한 용도 |
|------|------|------------|
| WhatsApp | 비동기, 리치 미디어 | 알림, 업데이트 |
| Messenger | Facebook 연동 | 소셜 커머스 |
| LINE | 스티커, 리치메뉴 | 아시아 시장 |
$CONTENT$, 1, 5),

('40cbc806-4975-49af-beb7-ced9bc86d0f3', 'concept', 'basic', 'WhatsApp Business 연동', 
$CONTENT$
## 📲 WhatsApp Business API

### 연동 전 준비

| 항목 | 설명 |
|------|------|
| Facebook Business Manager | 비즈니스 계정 필요 |
| 전화번호 | 전용 번호 (기존 개인 번호 불가) |
| 비즈니스 인증 | Meta 비즈니스 인증 완료 |

### 연동 절차

1. **Admin** → **Channels** → **WhatsApp**
2. **Connect WhatsApp** 클릭
3. Facebook Business Manager 로그인
4. 전화번호 선택/추가
5. 인증 절차 진행

### WhatsApp 특수 기능

| 기능 | 설명 |
|------|------|
| **템플릿 메시지** | 승인된 템플릿으로 먼저 연락 가능 |
| **미디어 지원** | 이미지, 문서, 위치 공유 |
| **빠른 답장** | 버튼형 응답 |
| **목록 메시지** | 선택형 메뉴 |

### 24시간 규칙

```
⚠️ 중요:
고객이 먼저 메시지 → 24시간 내 자유 응답
24시간 후 → 템플릿 메시지만 가능
```
$CONTENT$, 2, 10),

('40cbc806-4975-49af-beb7-ced9bc86d0f3', 'practice', 'basic', '메신저 채널 설정', 
$CONTENT$
## ✏️ Facebook Messenger 연동 실습

### 1단계: Facebook 페이지 준비

- Facebook Business 페이지 필요
- 페이지 관리자 권한 확인

### 2단계: Freshchat 연결

1. **Admin** → **Channels** → **Facebook Messenger**
2. **Connect Facebook Page** 클릭
3. Facebook 로그인
4. 연결할 페이지 선택
5. 권한 승인

### 3단계: 설정

```
✅ 페이지 메시지 수신
✅ 새 대화 자동 생성
✅ 근무 시간 외 자동 응답
```

### 4단계: 자동 응답 설정

```
근무 시간 외 메시지:

"안녕하세요! 현재 운영 시간이 아닙니다.
운영 시간: 평일 09:00 - 18:00

긴급한 문의는 이메일로 보내주세요.
support@company.com"
```

### 5단계: 테스트

1. Facebook 페이지에서 메시지 보내기
2. Freshchat에서 수신 확인
3. 답장 → Facebook에서 수신 확인
$CONTENT$, 3, 10),

('40cbc806-4975-49af-beb7-ced9bc86d0f3', 'overview', 'intermediate', '통합 인박스 관리', 
$CONTENT$
## 📥 모든 채널, 하나의 인박스

### 통합 뷰의 장점

```
Before:
- WhatsApp 앱 확인
- Messenger 확인  
- 웹 채팅 확인
- 각각 따로 응답

After:
- Freshchat 하나에서 모든 채널 확인
- 동일한 에이전트 경험
- 통합 히스토리
```

### 채널별 태그 자동 지정

| 채널 | 자동 태그 | 라우팅 |
|------|----------|--------|
| WhatsApp | `channel:whatsapp` | 모바일팀 |
| Messenger | `channel:messenger` | 소셜팀 |
| Web Chat | `channel:web` | 일반팀 |

### 우선순위 설정

```
높음: WhatsApp (실시간 기대)
보통: Messenger, Web Chat
낮음: Email
```
$CONTENT$, 1, 10),

('40cbc806-4975-49af-beb7-ced9bc86d0f3', 'overview', 'advanced', '채널별 최적화', 
$CONTENT$
## ⚡ 채널 특성에 맞는 운영

### 채널별 SLA 전략

| 채널 | 첫 응답 목표 | 해결 목표 |
|------|-------------|----------|
| Web Chat | 1분 | 15분 |
| WhatsApp | 5분 | 1시간 |
| Messenger | 10분 | 2시간 |

### 채널별 봇 전략

```
Web Chat: 풀 기능 봇
- 플로우 봇 + Answer Bot
- 에이전트 연결 옵션

WhatsApp: 간소화 봇  
- 빠른 버튼 응답
- 템플릿 메시지 활용

Messenger: 소셜 특화
- 리치 카드 활용
- 상품 카탈로그 연동
```

### 성과 분석

| 지표 | 웹 | WhatsApp | Messenger |
|------|-----|----------|-----------|
| 대화량 | 60% | 25% | 15% |
| CSAT | 4.5 | 4.7 | 4.3 |
| 해결 시간 | 10분 | 30분 | 45분 |
$CONTENT$, 1, 12);


-- ============================================
-- 4. 팀 관리 및 라우팅 (team-routing)
-- ============================================

INSERT INTO module_contents (module_id, section_type, level, title_ko, content_md, display_order, estimated_minutes) VALUES
('04d8e2e6-23e2-459d-b1e4-e256be7b4be1', 'overview', 'basic', '에이전트 팀 구성', 
$CONTENT$
## 👥 효과적인 팀 구조

### 그룹(팀) 구성 전략

| 구성 기준 | 예시 | 장점 |
|----------|------|------|
| **기능별** | 결제팀, 기술팀 | 전문성 |
| **채널별** | 채팅팀, 소셜팀 | 채널 최적화 |
| **지역별** | 한국팀, 영어팀 | 언어/시간대 |
| **티어별** | L1, L2, L3 | 에스컬레이션 |

### Freshchat 팀 설정

```
📁 그룹 구조
├── 💬 일반 지원
│   ├── 에이전트 A
│   └── 에이전트 B
├── 💳 결제 전문
│   └── 에이전트 C
└── 🔧 기술 지원
    ├── 에이전트 D
    └── 에이전트 E
```

### 에이전트 역할

| 역할 | 권한 |
|------|------|
| **Agent** | 대화 응대, 기본 설정 |
| **Supervisor** | + 팀 모니터링, 리포트 |
| **Admin** | + 모든 설정, 채널 관리 |
$CONTENT$, 1, 5),

('04d8e2e6-23e2-459d-b1e4-e256be7b4be1', 'concept', 'basic', '대화 배정 방식', 
$CONTENT$
## 🔀 라우팅 기본 개념

### 배정 방식

| 방식 | 설명 | 적합한 상황 |
|------|------|------------|
| **라운드 로빈** | 순서대로 배정 | 동등한 역량 |
| **로드 밸런싱** | 현재 대화 수 기준 | 균등 분배 |
| **스킬 기반** | 전문 분야 매칭 | 전문성 필요 |

### 배정 흐름

```
새 대화 수신
    ↓
[라우팅 규칙 확인]
    ↓
조건 1: 언어 = 한국어 → 한국팀
조건 2: 태그 = 결제 → 결제팀
기본: → 일반팀
    ↓
[팀 내 배정]
라운드 로빈 or 로드 밸런싱
```

### 온라인 상태

| 상태 | 의미 | 배정 |
|------|------|------|
| 🟢 Available | 대화 가능 | ✅ 배정됨 |
| 🟡 Busy | 바쁨 | ⚠️ 제한적 |
| 🔴 Offline | 오프라인 | ❌ 미배정 |
$CONTENT$, 2, 8),

('04d8e2e6-23e2-459d-b1e4-e256be7b4be1', 'practice', 'basic', '라우팅 규칙 설정', 
$CONTENT$
## ✏️ 자동 배정 규칙 실습

### 시나리오
"결제" 관련 문의 → 결제팀 자동 배정

### 1단계: 그룹 확인

**Admin** → **Groups**에서 "결제팀" 그룹 확인

### 2단계: 라우팅 규칙 생성

**Admin** → **Assignment Rules** → **New Rule**

### 3단계: 조건 설정

```
이름: "결제 문의 라우팅"

조건:
- 대화 메시지에 "결제" 포함
- OR 대화 메시지에 "payment" 포함
- OR 대화 메시지에 "환불" 포함
```

### 4단계: 액션 설정

```
배정 대상: 결제팀
배정 방식: 로드 밸런싱
```

### 5단계: 우선순위 설정

- 규칙 우선순위: 1 (가장 먼저 확인)
- 매칭되지 않으면 다음 규칙으로

### 테스트

1. "결제가 안 돼요" 메시지 전송
2. 결제팀 에이전트에게 배정 확인
$CONTENT$, 3, 10),

('04d8e2e6-23e2-459d-b1e4-e256be7b4be1', 'overview', 'intermediate', '고급 라우팅 전략', 
$CONTENT$
## 🎯 스킬 기반 라우팅

### 스킬 정의

| 스킬 | 설명 | 보유 에이전트 |
|------|------|--------------|
| `한국어` | 한국어 응대 | 5명 |
| `영어` | 영어 응대 | 3명 |
| `기술` | 기술 문제 해결 | 4명 |
| `VIP` | VIP 고객 전담 | 2명 |

### 라우팅 로직

```
새 대화: "I can't login"
    ↓
[언어 감지] 영어
    ↓
[필요 스킬] 영어 + 기술
    ↓
[매칭] 영어 AND 기술 스킬 보유자
    ↓
[배정] 에이전트 D
```

### 폴백 전략

```
1차: 모든 스킬 매칭 에이전트
2차: 일부 스킬 매칭 에이전트  
3차: 온라인인 아무 에이전트
4차: 대기열 (에이전트 없음)
```
$CONTENT$, 1, 10),

('04d8e2e6-23e2-459d-b1e4-e256be7b4be1', 'overview', 'advanced', '대기열 관리', 
$CONTENT$
## ⏳ 대기 고객 관리

### 대기열 발생 상황

```
에이전트 용량: 3명 × 5대화 = 15대화
현재 대화: 15대화 (풀)
신규 문의: 대기열로
```

### 대기열 설정

| 설정 | 권장값 | 설명 |
|------|--------|------|
| 최대 대기 | 20 | 초과 시 메시지 표시 |
| 대기 시간 알림 | 켜기 | "약 5분 대기" |
| 콜백 옵션 | 켜기 | 나중에 연락 받기 |

### 대기 중 자동화

```
대기열 진입 시:
"현재 상담원이 모두 통화 중입니다.
예상 대기 시간: 약 5분

[FAQ 확인하기] [나중에 연락받기]"

2분 경과:
"거의 다 됐어요! 곧 연결됩니다."
```

### 피크 시간 대응

| 시간대 | 예상 볼륨 | 대응 |
|--------|----------|------|
| 09-10시 | 높음 | 전원 대기 |
| 12-13시 | 낮음 | 교대 휴식 |
| 17-18시 | 높음 | 봇 적극 활용 |
$CONTENT$, 1, 12);


-- ============================================
-- 5. 캠페인 및 인앱 메시지 (campaigns)
-- ============================================

INSERT INTO module_contents (module_id, section_type, level, title_ko, content_md, display_order, estimated_minutes) VALUES
('1fef628a-a680-4988-8ac8-e4cf9b1247a9', 'overview', 'basic', '프로액티브 메시징', 
$CONTENT$
## 📢 먼저 다가가는 고객 경험

### 리액티브 vs 프로액티브

| 리액티브 | 프로액티브 |
|----------|-----------|
| 고객이 먼저 문의 | 우리가 먼저 제안 |
| 문제 발생 후 대응 | 문제 예방 |
| 수동적 지원 | 능동적 참여 |

### 프로액티브 메시징 활용

| 상황 | 메시지 예시 |
|------|------------|
| 결제 페이지 10초 | "결제에 도움이 필요하신가요?" |
| 장바구니 이탈 | "잊으신 상품이 있어요!" |
| 신규 가입 | "시작 가이드를 보여드릴까요?" |
| 오류 페이지 | "문제가 발생했군요. 도와드릴까요?" |

### Freshchat 캠페인 유형

```
📧 이메일 캠페인: 대량 발송
💬 인앱 메시지: 앱/웹 내 팝업
🔔 푸시 알림: 모바일 푸시
```
$CONTENT$, 1, 5),

('1fef628a-a680-4988-8ac8-e4cf9b1247a9', 'concept', 'basic', '트리거 메시지 이해', 
$CONTENT$
## 🎯 상황별 자동 메시지

### 트리거 조건

| 트리거 유형 | 예시 |
|------------|------|
| **페이지 방문** | 가격 페이지 진입 |
| **시간 기반** | 페이지에서 30초 |
| **스크롤** | 페이지 50% 스크롤 |
| **이벤트** | 버튼 클릭, 에러 발생 |
| **사용자 속성** | VIP 고객, 신규 가입 |

### 트리거 메시지 구조

```
IF [트리거 조건]
AND [타겟 조건]
THEN [메시지 표시]
```

### 예시: 결제 도움

```
트리거: 결제 페이지에서 60초 경과
타겟: 장바구니 금액 > 10만원
메시지: 
  "고민되시나요? 
   지금 결제하면 5% 추가 할인!"
  [할인 받기] [나중에]
```

### 표시 옵션

| 옵션 | 설명 |
|------|------|
| 팝업 | 화면 중앙에 표시 |
| 슬라이드 | 하단에서 올라옴 |
| 위젯 내 | 채팅 위젯에 표시 |
$CONTENT$, 2, 8),

('1fef628a-a680-4988-8ac8-e4cf9b1247a9', 'practice', 'basic', '첫 캠페인 만들기', 
$CONTENT$
## ✏️ 트리거 메시지 실습

### 시나리오
가격 페이지에서 20초 이상 머무른 방문자에게 도움 제안

### 1단계: 캠페인 생성

**Admin** → **Campaigns** → **New Campaign**
- 유형: 인앱 메시지

### 2단계: 트리거 설정

```
조건:
- 페이지 URL에 "/pricing" 포함
- AND 페이지 체류 시간 > 20초
```

### 3단계: 타겟 설정

```
대상:
- 모든 방문자
- (선택) 로그인 사용자만
```

### 4단계: 메시지 작성

```
제목: 요금제 선택이 어려우신가요?

본문: 
비즈니스에 맞는 요금제를 추천해드릴게요.
간단한 질문 몇 가지만 답해주세요!

버튼: [추천받기] [괜찮아요]
```

### 5단계: 표시 설정

- 위치: 우측 하단 슬라이드
- 빈도: 세션당 1회
- 닫기 후: 다시 표시 안 함

### 6단계: 테스트 및 활성화
$CONTENT$, 3, 10),

('1fef628a-a680-4988-8ac8-e4cf9b1247a9', 'overview', 'intermediate', '타겟 세그먼트', 
$CONTENT$
## 🎯 정교한 고객 타겟팅

### 세그먼트 기준

| 기준 | 예시 |
|------|------|
| **행동** | 최근 7일 방문, 구매 이력 |
| **속성** | 플랜 유형, 가입일 |
| **이벤트** | 기능 사용, 오류 경험 |
| **참여도** | 활성/비활성 사용자 |

### 세그먼트 예시

```
"이탈 위험 유료 고객"
- 플랜 = Pro 이상
- AND 최근 로그인 > 14일 전
- AND 지난 달 사용량 < 평균 50%
```

### 세그먼트별 캠페인

| 세그먼트 | 목표 | 메시지 |
|----------|------|--------|
| 신규 가입 | 활성화 | 온보딩 가이드 |
| 무료 사용자 | 전환 | 프로 기능 소개 |
| 이탈 위험 | 유지 | 1:1 상담 제안 |
| VIP | 감사 | 전용 혜택 안내 |
$CONTENT$, 1, 10),

('1fef628a-a680-4988-8ac8-e4cf9b1247a9', 'overview', 'advanced', '캠페인 성과 분석', 
$CONTENT$
## 📊 캠페인 최적화

### 핵심 지표

| 지표 | 설명 | 목표 |
|------|------|------|
| **노출률** | 표시된 비율 | 타겟 도달 |
| **클릭률** | 클릭/노출 | 관심 유도 |
| **전환률** | 목표 달성/클릭 | 실제 효과 |
| **이탈률** | 닫기/노출 | 방해 수준 |

### A/B 테스트

```
버전 A: "도움이 필요하신가요?"
버전 B: "궁금한 점이 있으신가요?"

결과:
A: 클릭률 5%
B: 클릭률 8% ← 승자
```

### 최적화 포인트

| 요소 | 테스트 항목 |
|------|------------|
| 타이밍 | 10초 vs 30초 |
| 문구 | 질문형 vs 제안형 |
| 버튼 | 색상, 문구 |
| 위치 | 우측 vs 중앙 |

### ROI 계산

```
캠페인: "결제 도움 제안"
- 노출: 10,000명
- 대화 시작: 500명 (5%)
- 결제 완료: 50명 (10%)
- 평균 객단가: 100,000원
- 매출 기여: 5,000,000원
```
$CONTENT$, 1, 12);


-- ============================================
-- 결과 확인
-- ============================================
SELECT 
    cm.target_product_id,
    cm.name_ko as module_name,
    COUNT(mc.id) as content_count,
    STRING_AGG(DISTINCT mc.level, ', ' ORDER BY mc.level) as levels
FROM curriculum_modules cm
LEFT JOIN module_contents mc ON cm.id = mc.module_id
WHERE cm.target_product_id = 'freshchat'
GROUP BY cm.id, cm.target_product_id, cm.name_ko, cm.display_order
ORDER BY cm.display_order;
