-- =====================================================
-- 자동화 및 워크플로우 모듈 콘텐츠 (module_id: 025af628-dffb-48b0-8270-60c286699db7)
-- =====================================================

-- ===== 기초 레벨 =====

INSERT INTO module_contents (module_id, section_type, level, title_ko, content_md, display_order) VALUES
('025af628-dffb-48b0-8270-60c286699db7', 'overview', 'basic', '자동화란 무엇인가?', 
'## 🤖 IT 서비스 자동화의 개념

**자동화(Automation)**는 사람이 반복적으로 수행하는 작업을 시스템이 자동으로 처리하게 하는 것입니다.

### 왜 자동화가 필요한가요?

| 수동 처리 | 자동화 |
|----------|--------|
| 시간 소모 많음 | 즉시 처리 |
| 실수 가능성 높음 | 일관된 품질 |
| 야간/주말 처리 어려움 | 24/7 동작 |
| 확장성 한계 | 무제한 확장 |

### 자동화 가능한 작업 예시

```
📋 티켓 자동화
├── 자동 배정: "비밀번호" 포함 → IT헬프데스크
├── 우선순위 설정: "긴급" 포함 → 높음
├── 자동 응답: 접수 알림 이메일 발송
└── 자동 종료: 7일간 응답 없음 → 자동 종료

📧 알림 자동화
├── SLA 위반 임박: 담당자 알림
├── 상태 변경: 요청자에게 통보
├── 승인 대기: 승인자에게 리마인더
└── 에스컬레이션: 관리자에게 자동 전달

⚙️ 작업 자동화
├── 계정 생성: AD 자동 생성
├── 권한 부여: 시스템 자동 설정
├── 백업: 정기 자동 백업
└── 보고서: 월간 리포트 자동 생성
```

### 자동화의 효과

```
Before 자동화:
  티켓 100건 × 평균 5분 = 500분 (8.3시간)

After 자동화:
  자동 처리 70건 × 0분 = 0분
  수동 처리 30건 × 5분 = 150분 (2.5시간)
  
  절감: 5.8시간/일 → 월 116시간
```

> 💡 **핵심 포인트**: 자동화는 단순 반복 작업을 제거하여 팀이 더 가치 있는 일에 집중하게 합니다.', 1);

INSERT INTO module_contents (module_id, section_type, level, title_ko, content_md, display_order) VALUES
('025af628-dffb-48b0-8270-60c286699db7', 'core_concepts', 'basic', '워크플로우 오토메이터 기초', 
'## 🔄 워크플로우 오토메이터란?

Freshservice의 **워크플로우 오토메이터(Workflow Automator)**는 복잡한 비즈니스 프로세스를 자동화하는 도구입니다.

### 기본 구성 요소

| 요소 | 설명 | 예시 |
|-----|------|------|
| **트리거** | 자동화를 시작하는 조건 | 티켓 생성, 상태 변경 |
| **조건** | 실행 여부를 결정하는 규칙 | 우선순위 = 높음 |
| **액션** | 실제로 수행할 작업 | 이메일 전송, 필드 업데이트 |

### 간단한 워크플로우 예시

```
┌──────────────────────────────────────────────────────┐
│              비밀번호 초기화 자동화                    │
└──────────────────────────────────────────────────────┘
                         │
                         ▼
┌──────────────────────────────────────────────────────┐
│ 트리거: 티켓 생성됨                                    │
└──────────────────────────────────────────────────────┘
                         │
                         ▼
┌──────────────────────────────────────────────────────┐
│ 조건: 제목에 "비밀번호" 포함?                          │
└──────────────────────────────────────────────────────┘
          YES ↓                    NO ↓
┌──────────────────────┐    ┌──────────────────┐
│ 액션1: 그룹 배정      │    │ 액션: 아무것도   │
│   → IT헬프데스크      │    │   하지 않음      │
│                      │    └──────────────────┘
│ 액션2: 우선순위 설정  │
│   → 중간             │
│                      │
│ 액션3: 자동 응답      │
│   → "접수됨" 이메일  │
└──────────────────────┘
```

### 워크플로우 생성 단계

#### 1단계: 트리거 선택
- 티켓 생성됨
- 티켓 업데이트됨
- 티켓 종료됨
- 시간 기반 (예: 매일 오전 9시)

#### 2단계: 조건 설정
```
조건 예시:
- 우선순위가 "긴급"이면
- 카테고리가 "하드웨어"이면
- 요청자가 "VIP 그룹"이면
- 생성 후 24시간 경과했으면
```

#### 3단계: 액션 정의
```
액션 예시:
- 이메일 전송
- 그룹/담당자 배정
- 필드 값 변경
- 티켓 상태 변경
- 다른 티켓 생성
- Webhook 호출
```

### 실전 예시: 신규 입사자 장비 요청

```yaml
워크플로우: 신규 입사자 자동 처리
───────────────────────────────
트리거:
  서비스 요청 생성됨
  
조건:
  서비스 항목 = "신입사원 온보딩"
  AND 상태 = "승인됨"

액션:
  1. 자산 배정 (노트북, 모니터)
  2. 티켓 상태 → "진행 중"
  3. 담당자 배정 → IT자산팀
  4. 이메일 전송 → 신입사원 환영 메시지
  5. 체크리스트 생성 → 온보딩 태스크
```

> 💡 **팁**: 간단한 워크플로우부터 시작하세요. 복잡한 것은 나중에!', 2);

INSERT INTO module_contents (module_id, section_type, level, title_ko, content_md, display_order) VALUES
('025af628-dffb-48b0-8270-60c286699db7', 'features', 'basic', '자동 배정 규칙', 
'## 🎯 티켓 자동 배정 (Auto-Assignment)

### 자동 배정이란?

티켓이 생성되거나 업데이트될 때 **조건에 따라 자동으로 그룹이나 담당자를 지정**하는 기능입니다.

### 배정 방식

| 방식 | 설명 | 장점 |
|-----|------|------|
| **그룹 배정** | 특정 팀에 배정 | 팀 내 유연한 처리 |
| **담당자 배정** | 특정 사람에게 배정 | 책임 명확 |
| **라운드 로빈** | 팀원에게 순서대로 배정 | 업무 균등 분배 |
| **부하 균등** | 티켓 적은 사람에게 배정 | 효율적 분배 |

### 배정 규칙 예시

#### 예시 1: 키워드 기반 배정

```
규칙: 하드웨어 문제
───────────────────
조건:
  제목 또는 설명에 포함: "노트북", "모니터", "프린터"
  
액션:
  그룹 배정: IT자산관리팀
  우선순위: 중간
```

#### 예시 2: 부서 기반 배정

```
규칙: 영업팀 지원
───────────────────
조건:
  요청자 부서 = 영업팀
  
액션:
  담당자 배정: 영업 전담 IT 지원
  우선순위: 높음 (비즈니스 영향 큼)
```

#### 예시 3: 긴급도 기반 에스컬레이션

```
규칙: 긴급 티켓
───────────────────
조건:
  우선순위 = 긴급
  
액션:
  그룹 배정: Tier-2 지원팀
  담당자 배정: 시니어 엔지니어 (라운드 로빈)
  이메일 전송: 관리자에게 알림
```

### 라운드 로빈 vs 부하 균등

```
라운드 로빈 (순서대로):
  티켓1 → 김OO
  티켓2 → 이OO
  티켓3 → 박OO
  티켓4 → 김OO (다시 처음부터)

부하 균등 (적은 사람에게):
  김OO: 5개 ◄── 티켓 배정
  이OO: 8개
  박OO: 7개
```

### 자동 배정 설정 순서

1. **현황 파악**: 어떤 유형의 티켓이 많은지 분석
2. **그룹화**: 유사한 티켓을 카테고리별로 분류
3. **담당팀 정의**: 각 카테고리별 처리 팀 결정
4. **규칙 생성**: 키워드, 카테고리 기반 규칙 작성
5. **테스트**: 실제 티켓으로 배정 테스트
6. **모니터링**: 잘못 배정되는 케이스 확인 및 수정

### 자주 하는 실수

❌ **너무 복잡한 규칙**: 많은 조건으로 혼란 발생
❌ **겹치는 규칙**: 여러 규칙이 동시에 적용되어 충돌
❌ **예외 처리 없음**: 규칙에 맞지 않는 티켓이 방치됨

✅ **해결책**: 간단하고 명확한 규칙, 우선순위 설정, 기본 배정 그룹 지정

> 💡 **핵심**: 80%의 티켓이 자동 배정되면 성공입니다. 100%를 목표로 하면 규칙이 너무 복잡해집니다.', 3);

INSERT INTO module_contents (module_id, section_type, level, title_ko, content_md, display_order) VALUES
('025af628-dffb-48b0-8270-60c286699db7', 'practice', 'basic', '간단한 자동화 만들기', 
'## 🛠️ 첫 번째 자동화 만들기

### 실습: "접수 확인 이메일 자동 발송"

사용자가 티켓을 생성하면 자동으로 접수 확인 이메일을 보내는 자동화를 만들어봅시다.

#### 단계별 가이드

**1단계: Workflow Automator 접근**
```
Admin → Workflows → Workflow Automator → New Workflow
```

**2단계: 기본 정보 입력**
```
이름: 티켓 접수 확인 이메일
설명: 티켓 생성 시 요청자에게 자동 응답
상태: 활성
```

**3단계: 트리거 설정**
```
Event: Ticket Created
```

**4단계: 조건 설정** (선택사항)
```
조건 없음 (모든 티켓에 적용)

또는 조건 추가:
- Source is not "Email" (이메일로 생성된 티켓 제외)
```

**5단계: 액션 추가 - 이메일 전송**
```yaml
액션: Send Email
───────────────────
받는 사람: {{ticket.requester.email}}
제목: [티켓 #{{ticket.id}}] 요청이 접수되었습니다

본문:
  안녕하세요, {{ticket.requester.first_name}}님.
  
  요청하신 내용이 접수되었습니다.
  
  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  티켓 번호: #{{ticket.id}}
  제목: {{ticket.subject}}
  우선순위: {{ticket.priority}}
  담당 그룹: {{ticket.group.name}}
  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  
  처리 완료 시 다시 안내드리겠습니다.
  
  감사합니다.
  IT 헬프데스크 드림
```

**6단계: 저장 및 활성화**

### 테스트하기

```
1. 테스트 티켓 생성
2. 이메일 수신 확인
3. 내용 검토 (변수가 올바르게 치환되었는지)
4. 필요시 워크플로우 수정
```

### 자주 사용하는 변수

| 변수 | 설명 | 예시 |
|-----|------|------|
| `{{ticket.id}}` | 티켓 번호 | 1234 |
| `{{ticket.subject}}` | 티켓 제목 | 비밀번호 초기화 요청 |
| `{{ticket.requester.first_name}}` | 요청자 이름 | 홍길동 |
| `{{ticket.group.name}}` | 배정 그룹 | IT헬프데스크 |
| `{{ticket.agent.name}}` | 담당자 | 김철수 |
| `{{ticket.priority}}` | 우선순위 | 높음 |

### 추가 실습 아이디어

**실습 2: 장기 미해결 티켓 알림**
```yaml
트리거: 시간 기반 - 매일 오전 10시
조건: 
  - 상태 = "진행 중" 또는 "보류"
  - 생성 후 3일 경과
액션:
  - 담당자에게 이메일 리마인더
  - 우선순위 한 단계 상승
```

**실습 3: VIP 고객 자동 우대**
```yaml
트리거: 티켓 생성됨
조건:
  - 요청자가 "VIP" 그룹에 속함
액션:
  - 우선순위 → 높음
  - 담당자 → 시니어 엔지니어
  - 관리자에게 알림 이메일
```

> 💡 **팁**: 처음에는 간단한 자동화부터 시작하세요. 익숙해지면 점점 복잡한 워크플로우를 만들 수 있습니다.', 4);

INSERT INTO module_contents (module_id, section_type, level, title_ko, content_md, display_order) VALUES
('025af628-dffb-48b0-8270-60c286699db7', 'faq', 'basic', '자주 묻는 질문', 
'## ❓ 자동화 기초 FAQ

### Q1: 자동화가 실행되지 않아요

**체크리스트**:
```
□ 워크플로우가 "활성" 상태인가?
□ 조건이 실제 티켓과 일치하는가?
□ 트리거 이벤트가 발생했는가?
□ 권한 문제는 없는가?
□ 실행 로그 확인 (Admin → Workflows → Execution Logs)
```

---

### Q2: 같은 이메일이 여러 번 발송돼요

**원인**:
- 여러 워크플로우가 동일한 액션 수행
- 티켓 업데이트 시마다 트리거됨

**해결**:
```yaml
조건 추가:
  - Trigger: Ticket Updated
  - Condition: Status changed (상태가 바뀔 때만)
  
중복 방지:
  - 다른 워크플로우와 조건 정리
  - "한 번만 실행" 옵션 활용
```

---

### Q3: 자동화와 수동 작업 중 어느 것이 우선인가요?

**우선순위**:
1. 자동화가 먼저 실행됨
2. 그 다음 사용자 수동 변경 적용
3. 수동 변경이 자동화를 덮어씀

**예시**:
```
자동화: 우선순위 → 낮음
사용자: 우선순위 → 긴급 (수동 변경)
결과: 긴급 (사용자 변경 적용)
```

---

### Q4: 워크플로우를 테스트하는 방법은?

**테스트 전략**:

1. **개발 환경 사용** (가능하면)
2. **비활성 상태로 생성** → 검토 후 활성화
3. **테스트 티켓 생성**
   - 조건에 맞는 티켓
   - 조건에 안 맞는 티켓
4. **실행 로그 확인**
   - 예상대로 동작했는지
   - 에러는 없는지

---

### Q5: 자동화할 만한 작업을 찾으려면?

**자동화 후보 찾기**:

```
📊 분석 방법:
1. 반복 작업 찾기
   - "매번 똑같이 하는 일이 뭐지?"
   - 예: 특정 부서 티켓은 항상 같은 팀에 배정

2. 시간 소모 작업
   - "어떤 일에 시간을 많이 쓰나?"
   - 예: 일일이 상태 업데이트, 이메일 전송

3. 사용자 불편사항
   - "자주 묻는 질문이 뭐지?"
   - 예: "제 티켓 어떻게 되고 있나요?"

4. 데이터 분석
   - 티켓 리포트에서 패턴 찾기
   - 예: "비밀번호" 티켓이 월 200건
```

---

### Q6: 워크플로우가 너무 많아서 관리가 어려워요

**정리 팁**:
- 명확한 이름 규칙: `[카테고리] 액션 설명`
- 설명 필드 활용: 목적, 담당자 명시
- 태그/그룹화 활용
- 사용하지 않는 워크플로우 비활성화
- 정기 리뷰 (분기별)

> 💡 **핵심**: 자동화는 "한 번 만들고 끝"이 아니라 지속적으로 개선해야 합니다.', 5);

-- ===== 중급 레벨은 다음 파일에 계속 =====
