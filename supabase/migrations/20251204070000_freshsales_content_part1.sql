-- ============================================
-- Freshsales 학습 콘텐츠 - Part 1
-- CRM 기초 + 영업 파이프라인
-- Date: 2025-12-04
-- ============================================

-- Module UUIDs:
-- crm-basics: a98aa643-4aac-4ce8-8593-8a1be0082714
-- sales-pipeline: 07227b91-ce12-4087-80ed-71e80b470fe3

-- ============================================
-- 1. CRM 기초 (crm-basics)
-- ============================================

INSERT INTO module_contents (module_id, section_type, level, title_ko, content_md, display_order, estimated_minutes) VALUES
('a98aa643-4aac-4ce8-8593-8a1be0082714', 'overview', 'basic', 'CRM이란 무엇인가', 
$CONTENT$
## 📊 CRM의 이해

### CRM = Customer Relationship Management

**고객 관계 관리** - 고객과의 모든 상호작용을 체계적으로 관리

### CRM이 필요한 이유

| 문제 | CRM 해결책 |
|------|-----------|
| 고객 정보 흩어짐 | 중앙 집중 관리 |
| 영업 기회 누락 | 파이프라인 추적 |
| 후속 조치 잊음 | 자동 리마인더 |
| 팀 협업 어려움 | 공유 뷰와 히스토리 |

### Freshsales CRM 핵심 개념

```
👤 Contacts (연락처)
   └─ 개인 고객 정보

🏢 Accounts (계정)
   └─ 회사/조직 정보

💰 Deals (거래)
   └─ 영업 기회

📋 Activities (활동)
   └─ 이메일, 통화, 미팅
```

### Freshsales의 강점

- 🎯 **내장 전화/이메일**: 별도 도구 불필요
- 🤖 **Freddy AI**: 리드 스코어링, 인사이트
- 📱 **모바일 앱**: 어디서든 영업
- 🔗 **Freshworks 통합**: 지원, 마케팅 연계
$CONTENT$, 1, 5),

('a98aa643-4aac-4ce8-8593-8a1be0082714', 'concept', 'basic', '연락처와 계정 관리', 
$CONTENT$
## 👤 Contacts & Accounts

### 연락처 (Contact)

개별 **사람**에 대한 정보

```
👤 김영업 님
├─ 📧 kim@abc.com
├─ 📱 010-1234-5678
├─ 🏢 ABC Corp (계정)
├─ 💼 영업 이사
└─ 🏷️ 태그: VIP, 의사결정자
```

### 계정 (Account)

**회사/조직**에 대한 정보

```
🏢 ABC Corporation
├─ 🌐 www.abccorp.com
├─ 👥 직원수: 500명
├─ 💰 연매출: 100억
├─ 📍 서울시 강남구
└─ 👤 연락처: 3명
    ├─ 김영업 (영업 이사)
    ├─ 이구매 (구매 담당)
    └─ 박대표 (CEO)
```

### 관계 구조

```
1 Account : N Contacts
    │
    └─ 한 회사에 여러 담당자

1 Contact : N Deals
    │
    └─ 한 사람과 여러 거래 진행 가능
```
$CONTENT$, 2, 8),

('a98aa643-4aac-4ce8-8593-8a1be0082714', 'practice', 'basic', '첫 연락처 등록', 
$CONTENT$
## ✏️ 연락처 & 계정 생성 실습

### 1단계: 계정 먼저 생성

**Accounts** → **+ New Account**

```
회사명: ABC Corporation
웹사이트: www.abccorp.com
산업: IT/소프트웨어
직원수: 100-500명
주소: 서울시 강남구
```

### 2단계: 연락처 생성

**Contacts** → **+ New Contact**

```
이름: 김영업
이메일: kim@abccorp.com
전화: 010-1234-5678
직함: 영업 이사
계정: ABC Corporation (연결)
```

### 3단계: 추가 정보 입력

```
소셜 미디어:
- LinkedIn: linkedin.com/in/kimyb

태그 추가:
- 의사결정자
- IT 관심

노트:
"첫 미팅에서 클라우드 솔루션 관심 표명"
```

### 4단계: 활동 기록

**+ Activity** → **Note**
```
"2024-12-04 전시회에서 명함 교환.
 내년 1분기 도입 검토 중이라고 함."
```
$CONTENT$, 3, 10),

('a98aa643-4aac-4ce8-8593-8a1be0082714', 'overview', 'intermediate', '리드 관리', 
$CONTENT$
## 🎯 리드(Lead) 프로세스

### 리드란?

**잠재 고객** - 아직 적합성이 검증되지 않은 연락처

### 리드 vs 연락처

| 리드 | 연락처 |
|------|--------|
| 관심 표명 단계 | 검증된 기회 |
| 아직 평가 중 | 영업 대상 확정 |
| 전환 필요 | Deal 생성 가능 |

### 리드 라이프사이클

```
수집 → 검증 → 전환 or 폐기

[New Lead]
    ↓
[Contacted] 첫 연락
    ↓
[Qualified] 적합성 확인
    ↓
[Convert] → Contact + Deal 생성
    or
[Disqualified] → 폐기/보류
```

### 리드 소스 추적

| 소스 | 예시 |
|------|------|
| 웹사이트 | 문의 폼 |
| 이벤트 | 전시회 명함 |
| 추천 | 기존 고객 소개 |
| 광고 | Google Ads |
| 콜드콜 | 아웃바운드 |
$CONTENT$, 1, 10),

('a98aa643-4aac-4ce8-8593-8a1be0082714', 'overview', 'advanced', 'Freddy AI 리드 스코어링', 
$CONTENT$
## 🤖 AI 기반 리드 평가

### Freddy AI 리드 스코어

각 리드에 **0-100점** 자동 부여

### 스코어 산정 요소

| 요소 | 가중치 | 예시 |
|------|--------|------|
| 행동 신호 | 40% | 이메일 열람, 웹 방문 |
| 프로필 매칭 | 30% | 회사 규모, 산업, 직급 |
| 참여도 | 20% | 답장 속도, 미팅 참석 |
| 히스토리 | 10% | 과거 거래 이력 |

### 스코어 해석

```
90-100: 🔥 Hot - 즉시 연락
70-89:  🌡️ Warm - 적극 팔로업
50-69:  😐 Cool - 육성 필요
0-49:   ❄️ Cold - 보류/장기 육성
```

### 자동화 연계

```
스코어 > 80 → 자동 알림 + 우선 배정
스코어 40-60 → 육성 캠페인 등록
스코어 < 40 → 분기별 재평가
```

### 커스텀 스코어링

```
+20점: 의사결정자 직급
+15점: 타겟 산업
+10점: 웹사이트 3회+ 방문
-10점: 경쟁사 재직
-20점: 예산 없음 표시
```
$CONTENT$, 1, 12);


-- ============================================
-- 2. 영업 파이프라인 (sales-pipeline)
-- ============================================

INSERT INTO module_contents (module_id, section_type, level, title_ko, content_md, display_order, estimated_minutes) VALUES
('07227b91-ce12-4087-80ed-71e80b470fe3', 'overview', 'basic', '파이프라인 개념', 
$CONTENT$
## 🔄 영업 파이프라인이란?

### 파이프라인 = 영업 흐름의 시각화

거래가 **처음 발견부터 성사까지** 거치는 단계들

### 기본 파이프라인 구조

```
[발견] → [검증] → [제안] → [협상] → [성사]
  10%     25%      50%      75%     100%

 $500K   $300K    $200K    $150K    $100K
```

### 파이프라인의 가치

| 질문 | 파이프라인이 알려주는 것 |
|------|----------------------|
| 얼마나 벌 수 있나? | 파이프라인 총액 |
| 언제 성사되나? | 예상 마감일 |
| 어디가 막혔나? | 단계별 체류 시간 |
| 누가 잘하나? | 담당자별 성과 |

### Freshsales 파이프라인 특징

```
📊 칸반 뷰: 드래그 앤 드롭
📈 가중치 예측: 단계별 확률
🎯 목표 대비: 할당량 추적
⏰ 알림: 정체 거래 감지
```
$CONTENT$, 1, 5),

('07227b91-ce12-4087-80ed-71e80b470fe3', 'concept', 'basic', '거래(Deal) 관리', 
$CONTENT$
## 💰 거래(Deal) 이해

### 거래란?

특정 **판매 기회** - 금액, 예상일, 확률 포함

### 거래 필수 정보

```
💰 Deal: ABC Corp 연간 계약

├─ 💵 금액: $50,000
├─ 📅 예상 마감: 2025-03-31
├─ 📊 단계: 제안
├─ 🎯 확률: 50%
├─ 👤 연락처: 김영업
├─ 🏢 계정: ABC Corporation
└─ 👨‍💼 담당자: 나
```

### 거래 단계 예시

| 단계 | 확률 | 활동 |
|------|------|------|
| 발견 | 10% | 첫 접촉, 니즈 파악 |
| 검증 | 25% | 예산/권한/니즈/시기 확인 |
| 제안 | 50% | 솔루션 제시, 견적 |
| 협상 | 75% | 가격/조건 협상 |
| 성사 | 100% | 계약 체결 |
| 실패 | 0% | 기회 상실 |

### 거래 금액 종류

```
Amount: 총 거래 금액
Expected Revenue: 금액 × 확률
  예) $50,000 × 50% = $25,000
```
$CONTENT$, 2, 8),

('07227b91-ce12-4087-80ed-71e80b470fe3', 'practice', 'basic', '첫 거래 생성', 
$CONTENT$
## ✏️ 거래 생성 및 관리 실습

### 1단계: 거래 생성

**Deals** → **+ New Deal**

```
거래명: ABC Corp - 연간 라이선스
금액: $50,000
예상 마감일: 2025-03-31
파이프라인: 기본 파이프라인
단계: 검증
```

### 2단계: 연결 정보

```
연락처: 김영업 (선택)
계정: ABC Corporation (자동 연결)
담당자: 나 (자동)
```

### 3단계: 추가 정보

```
제품: Enterprise 플랜
경쟁사: 없음
소스: 전시회
```

### 4단계: 활동 추가

**+ Activity** → **Task**
```
제목: 제안서 발송
기한: 2024-12-10
담당: 나
```

### 5단계: 단계 이동

거래 카드를 다음 단계로 드래그
```
[검증] → [제안]
```

확률 자동 업데이트: 25% → 50%
$CONTENT$, 3, 10),

('07227b91-ce12-4087-80ed-71e80b470fe3', 'overview', 'intermediate', '다중 파이프라인', 
$CONTENT$
## 🔀 복수 파이프라인 운영

### 언제 여러 파이프라인이 필요한가?

| 상황 | 파이프라인 |
|------|-----------|
| 신규 vs 갱신 | 신규 영업, 갱신 영업 |
| 제품별 | 제품 A, 제품 B |
| 지역별 | 국내, 해외 |
| 규모별 | 엔터프라이즈, SMB |

### 예시: 제품별 파이프라인

```
📦 SaaS 제품 파이프라인
├─ 데모 요청
├─ 데모 완료
├─ 무료 체험
├─ 결제 협의
└─ 구독 시작

🔧 서비스 파이프라인
├─ 요구사항 접수
├─ 제안서 작성
├─ 제안 발표
├─ 계약 협상
└─ 착수
```

### 파이프라인별 뷰

```
전체 보기: 모든 파이프라인 통합
개별 보기: 특정 파이프라인만
담당자별: 내 거래만
```
$CONTENT$, 1, 10),

('07227b91-ce12-4087-80ed-71e80b470fe3', 'overview', 'advanced', '매출 예측', 
$CONTENT$
## 📈 포캐스팅 (Forecasting)

### 매출 예측이란?

파이프라인 데이터로 **미래 매출 예측**

### 예측 방법

| 방법 | 계산 | 용도 |
|------|------|------|
| 단순 합계 | 모든 거래 금액 합 | 최대 가능 |
| 가중 합계 | 금액 × 확률 | 현실적 예측 |
| 카테고리 | Commit/Best Case | 신뢰도별 |

### Freshsales 포캐스트 뷰

```
Q1 2025 예측:

Commit (확실): $200,000
├─ ABC Corp $50K (90%)
└─ XYZ Inc $150K (95%)

Best Case (가능): $350,000
├─ Commit $200K
├─ DEF Ltd $100K (60%)
└─ GHI Corp $50K (50%)

Pipeline (전체): $500,000
```

### AI 예측 (Freddy)

```
Freddy 분석:

"Q1 목표: $300,000
 현재 진행: $200,000 (67%)
 
 ⚠️ 위험: $100K 부족
 
 권장 액션:
 - 'DEF Ltd' 거래 가속화
 - 신규 리드 10건 추가 필요"
```
$CONTENT$, 1, 12);


-- 결과 확인
SELECT 
    cm.target_product_id,
    cm.name_ko as module_name,
    COUNT(mc.id) as content_count
FROM curriculum_modules cm
LEFT JOIN module_contents mc ON cm.id = mc.module_id
WHERE cm.target_product_id = 'freshsales'
  AND cm.slug IN ('crm-basics', 'sales-pipeline')
GROUP BY cm.id, cm.target_product_id, cm.name_ko, cm.display_order
ORDER BY cm.display_order;
