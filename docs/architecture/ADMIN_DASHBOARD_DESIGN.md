# Agent Platform ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ ì„¤ê³„ ë¬¸ì„œ

> **ì‘ì„±ì¼**: 2025ë…„ 11ì›” 22ì¼  
> **ì‘ì„±ì**: Agent Platform Team  
> **ìƒíƒœ**: ì„¤ê³„ ì§„í–‰ ì¤‘

---

## 1. ë°°ê²½ ë° ëª©ì 

### 1.1 í”„ë¡œì íŠ¸ ê°œìš”

**Agent Platform**ì€ ì—¬ëŸ¬ AI ì—ì´ì „íŠ¸ë“¤ì˜ ë°±ë³¸(backbone) ì—­í• ì„ í•˜ëŠ” FastAPI ê¸°ë°˜ ë°±ì—”ë“œ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. í˜„ì¬ SK Bioscience IT ì§€ì› ì—ì´ì „íŠ¸ë¥¼ ì‹œì‘ìœ¼ë¡œ, í–¥í›„ ë‹¤ì–‘í•œ í…Œë„ŒíŠ¸ì™€ í”Œë«í¼ì— ë°°í¬ë  ì—ì´ì „íŠ¸ë“¤ì„ í†µí•© ê´€ë¦¬í•  í•„ìš”ì„±ì´ ëŒ€ë‘ë˜ì—ˆìŠµë‹ˆë‹¤.

### 1.2 í•´ê²°í•´ì•¼ í•  ë¬¸ì œ

1. **ë‹¤ì¤‘ í”Œë«í¼ ë°°í¬**
   - Homepage (wedosoft.net/agents/*)
   - Slack App (ì›Œí¬ìŠ¤í˜ì´ìŠ¤ í†µí•©)
   - Freshdesk Widget (í‹°ì¼“ ì‹œìŠ¤í…œ ë‚´ì¥)
   - Gmail Plugin (ê°œì¸ë³„ ì„¤ì¹˜)
   - ê¸°íƒ€ í–¥í›„ ì¶”ê°€ë  í”Œë«í¼

2. **í…Œë„ŒíŠ¸ë³„ ê´€ë¦¬**
   - SK Bioscience: Freshservice KBë§Œ ì ‘ê·¼
   - Customer A: íŠ¹ì • ì œí’ˆêµ°ë§Œ ì ‘ê·¼
   - ê° í…Œë„ŒíŠ¸ë³„ ë…ë¦½ì ì¸ RAG Store ê´€ë¦¬

3. **í†µí•© ëª¨ë‹ˆí„°ë§ í•„ìš”**
   - í”Œë«í¼ë³„ ì‚¬ìš©ëŸ‰ ë¶„ì„
   - API í˜¸ì¶œ í†µê³„
   - Gemini í† í° ì†Œë¹„ í˜„í™©
   - ì‘ë‹µ í’ˆì§ˆ ë©”íŠ¸ë¦­

4. **ìš´ì˜ íš¨ìœ¨ì„±**
   - RAG Store ë¬¸ì„œ ì—…ë¡œë“œ/ì‚­ì œ
   - ë°°í¬ ìƒíƒœ ëª¨ë‹ˆí„°ë§
   - ì—ëŸ¬ ë¡œê·¸ ì¶”ì 
   - ê¶Œí•œ ê´€ë¦¬

---

## 2. ì•„í‚¤í…ì²˜ ì„¤ê³„

### 2.1 ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ë‹¤ì–‘í•œ ë°°í¬ í”Œë«í¼                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  www.wedosoft.net/agents/*  â”‚  Slack App  â”‚  Freshdesk      â”‚
â”‚  Gmail Plugin               â”‚  ê¸°íƒ€ í”Œë«í¼ â”‚  ...            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ HTTP/HTTPS
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              api.wedosoft.net (FastAPI Backend)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ POST /api/chat           - ì—ì´ì „íŠ¸ ëŒ€í™”                  â”‚
â”‚  â€¢ GET  /api/admin/deployments - ë°°í¬ í˜„í™©                  â”‚
â”‚  â€¢ GET  /api/admin/analytics   - ì‚¬ìš©ëŸ‰ ë¶„ì„                â”‚
â”‚  â€¢ POST /api/admin/stores      - RAG Store ê´€ë¦¬             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ ê´€ë¦¬ ìš”ì²­
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         admin.wedosoft.net (ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ /dashboard      - ì „ì²´ í˜„í™©                               â”‚
â”‚  â€¢ /deployments    - ë°°í¬ ê´€ë¦¬                               â”‚
â”‚  â€¢ /tenants        - í…Œë„ŒíŠ¸ ê´€ë¦¬                             â”‚
â”‚  â€¢ /analytics      - ì‚¬ìš©ëŸ‰ ë¶„ì„                             â”‚
â”‚  â€¢ /stores         - RAG Store ê´€ë¦¬                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 í˜¸ìŠ¤íŒ… êµ¬ì¡°

#### Option A: Homepage í†µí•© (/admin ê²½ë¡œ)
```
www.wedosoft.net (í•˜ë‚˜ì˜ Next.js ì•±)
â”œâ”€â”€ /                    # í™ˆí˜ì´ì§€
â”œâ”€â”€ /agents/common       # ê³µê°œ ì—ì´ì „íŠ¸
â”œâ”€â”€ /agents/sk-bioscience # SK ì—ì´ì „íŠ¸
â””â”€â”€ /admin               # ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ (ê°™ì€ ë„ë©”ì¸)
    â”œâ”€â”€ /dashboard
    â”œâ”€â”€ /deployments
    â””â”€â”€ ...
```

**ì¥ì :**
- âœ… ë°°í¬ ë‹¨ìˆœ (í•˜ë‚˜ì˜ Vercel í”„ë¡œì íŠ¸)
- âœ… ê°™ì€ ë„ë©”ì¸, SSL ê³µìœ 
- âœ… ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš© (shadcn/ui)
- âœ… Middlewareë¡œ `/admin` ì ‘ê·¼ ì œì–´ ê°€ëŠ¥

**ë‹¨ì :**
- âŒ í™ˆí˜ì´ì§€ì™€ ê´€ë¦¬ ë„êµ¬ê°€ ì½”ë“œë² ì´ìŠ¤ ê³µìœ 
- âŒ ê´€ë¦¬ììš© ë²ˆë“¤ì´ ì¼ë°˜ ì‚¬ìš©ìì—ê²Œë„ ë¡œë“œë¨ (ë¯¸ë¯¸í•¨)
- âŒ í™•ì¥ì„± ì œí•œì 

#### Option B: ë…ë¦½ ëŒ€ì‹œë³´ë“œ (ë³„ë„ í˜¸ìŠ¤íŒ…)
```
www.wedosoft.net        # Homepage (Next.js)
â””â”€â”€ /agents/*           # ê³µê°œ ì—ì´ì „íŠ¸ë§Œ

admin.wedosoft.net      # Agent Admin (ë³„ë„ Next.js í”„ë¡œì íŠ¸)
â””â”€â”€ /                   # ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ ì „ìš©

api.wedosoft.net        # Agent Platform (FastAPI)
â””â”€â”€ /api/*              # ë°±ì—”ë“œ API
```

**ì¥ì :**
- âœ… ì™„ì „í•œ ê´€ì‹¬ì‚¬ ë¶„ë¦¬
- âœ… ë…ë¦½ì  ë°°í¬ ë° ìŠ¤ì¼€ì¼ë§
- âœ… ë³´ì•ˆ ê°•í™” (ë³„ë„ ë„ë©”ì¸, IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸)
- âœ… ë²ˆë“¤ ìµœì í™” (ê° ì„œë¹„ìŠ¤ë³„ ìµœì  í¬ê¸°)

**ë‹¨ì :**
- âŒ ë„ë©”ì¸/í˜¸ìŠ¤íŒ… ë¹„ìš© ì¶”ê°€
- âŒ ë°°í¬ ë³µì¡ë„ ì¦ê°€
- âŒ ì»´í¬ë„ŒíŠ¸ ì¤‘ë³µ ê°€ëŠ¥ì„±

---

## 3. ì„¤ê³„ ê²°ì •

### 3.1 ìµœì¢… ê¶Œì¥ì‚¬í•­

**ë‹¨ê³„ì  ì ‘ê·¼ (Phased Approach)**

#### Phase 1: Homepage í†µí•© (í˜„ì¬ ê·œëª¨)
- **ì„ íƒ**: Option A (Homepageì— `/admin` ì¶”ê°€)
- **ì´ìœ **:
  - í˜„ì¬ í…Œë„ŒíŠ¸ 1ê°œ (SK Bioscience)
  - ë¹ ë¥¸ êµ¬í˜„ ê°€ëŠ¥
  - ê¸°ì¡´ ì¸í”„ë¼ í™œìš©

#### Phase 2: ë…ë¦½ ëŒ€ì‹œë³´ë“œ (í™•ì¥ ì‹œì )
- **ì „í™˜ ì‹œì **:
  - í…Œë„ŒíŠ¸ 10ê°œ ì´ìƒ
  - ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ ë³µì¡ë„ ì¦ê°€
  - ë³´ì•ˆ ìš”êµ¬ì‚¬í•­ ê°•í™” (VPN í•„ìš” ë“±)
- **ì„ íƒ**: Option Bë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜

### 3.2 íŒë‹¨ ê·¼ê±°

| ê¸°ì¤€ | Homepage í†µí•© | ë…ë¦½ ëŒ€ì‹œë³´ë“œ | ì„ íƒ |
|------|--------------|-------------|------|
| **êµ¬í˜„ ì†ë„** | â­â­â­ ë¹ ë¦„ | â­â­ ë³´í†µ | Phase 1 |
| **ë°°í¬ ë³µì¡ë„** | â­â­â­ ë‹¨ìˆœ | â­â­ ë³µì¡ | Phase 1 |
| **ë³´ì•ˆ** | â­â­ ë³´í†µ | â­â­â­ ê°•ë ¥ | Phase 2 |
| **í™•ì¥ì„±** | â­â­ ì œí•œì  | â­â­â­ ìœ ì—° | Phase 2 |
| **ìœ ì§€ë³´ìˆ˜** | â­â­ ë³´í†µ | â­â­â­ ë…ë¦½ì  | Phase 2 |
| **ë¹„ìš©** | â­â­â­ ì €ë ´ | â­â­ ì¶”ê°€ | Phase 1 |

---

## 4. êµ¬í˜„ ê³„íš

### 4.1 Phase 1: Homepage í†µí•© (/admin)

#### 4.1.1 ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
homepage/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ admin/                    # ğŸ†• ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ
â”‚   â”‚   â”œâ”€â”€ layout.tsx            # ê´€ë¦¬ì ì „ìš© ë ˆì´ì•„ì›ƒ
â”‚   â”‚   â”œâ”€â”€ page.tsx              # ëŒ€ì‹œë³´ë“œ ë©”ì¸
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx          # ì „ì²´ í˜„í™©
â”‚   â”‚   â”œâ”€â”€ deployments/
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx          # ë°°í¬ ëª©ë¡
â”‚   â”‚   â”‚   â””â”€â”€ [platform]/
â”‚   â”‚   â”‚       â””â”€â”€ page.tsx      # í”Œë«í¼ë³„ ìƒì„¸
â”‚   â”‚   â”œâ”€â”€ tenants/
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx          # í…Œë„ŒíŠ¸ ëª©ë¡
â”‚   â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚   â”‚       â”œâ”€â”€ page.tsx      # í…Œë„ŒíŠ¸ ìƒì„¸
â”‚   â”‚   â”‚       â””â”€â”€ settings/
â”‚   â”‚   â”‚           â””â”€â”€ page.tsx  # ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ analytics/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx          # ì‚¬ìš©ëŸ‰ ë¶„ì„
â”‚   â”‚   â””â”€â”€ stores/
â”‚   â”‚       â”œâ”€â”€ page.tsx          # RAG Store ëª©ë¡
â”‚   â”‚       â””â”€â”€ [storeId]/
â”‚   â”‚           â””â”€â”€ page.tsx      # Store ìƒì„¸
â”‚   â””â”€â”€ agents/                   # ê¸°ì¡´ ì—ì´ì „íŠ¸ UI
â”‚
â”œâ”€â”€ components/
â”‚   â””â”€â”€ admin/                    # ğŸ†• ê´€ë¦¬ì ì»´í¬ë„ŒíŠ¸
â”‚       â”œâ”€â”€ deployment-card.tsx
â”‚       â”œâ”€â”€ tenant-table.tsx
â”‚       â”œâ”€â”€ usage-chart.tsx
â”‚       â””â”€â”€ store-uploader.tsx
â”‚
â””â”€â”€ middleware.ts                 # ğŸ†• /admin ì ‘ê·¼ ì œì–´
```

#### 4.1.2 Backend API ì¶”ê°€ (agent-platform)
```python
# app/api/admin/deployments.py
from fastapi import APIRouter, Depends

router = APIRouter(prefix="/admin/deployments", tags=["admin"])

@router.get("/")
async def list_deployments():
    """ëª¨ë“  í”Œë«í¼ì˜ ì—ì´ì „íŠ¸ ë°°í¬ í˜„í™©"""
    return {
        "deployments": [
            {
                "id": "homepage-public",
                "platform": "homepage",
                "tenant": "public",
                "endpoint": "https://wedosoft.net/agents/common",
                "status": "active",
                "last_request": "2025-11-22T10:30:00Z"
            },
            {
                "id": "slack-skbio",
                "platform": "slack",
                "tenant": "sk-bioscience",
                "workspace_id": "T01234567",
                "status": "active",
                "last_request": "2025-11-22T10:25:00Z"
            }
        ]
    }

@router.get("/analytics")
async def get_deployment_analytics(
    platform: str = None,
    tenant: str = None,
    date_from: str = None,
    date_to: str = None
):
    """ë°°í¬ë³„ ì‚¬ìš©ëŸ‰ í†µê³„"""
    # Supabaseì—ì„œ sessions, messages í…Œì´ë¸” ì§‘ê³„
    pass

# app/api/admin/tenants.py
@router.get("/")
async def list_tenants():
    """í…Œë„ŒíŠ¸ ëª©ë¡"""
    pass

@router.get("/{tenant_id}")
async def get_tenant_detail(tenant_id: str):
    """í…Œë„ŒíŠ¸ ìƒì„¸ ì •ë³´ ë° ì„¤ì •"""
    pass

# app/api/admin/stores.py
@router.get("/")
async def list_rag_stores():
    """RAG Store ëª©ë¡"""
    pass

@router.post("/{store_id}/documents")
async def upload_documents(store_id: str, files: List[UploadFile]):
    """ë¬¸ì„œ ì—…ë¡œë“œ"""
    pass
```

#### 4.1.3 ì ‘ê·¼ ì œì–´ (Middleware)
```typescript
// middleware.ts
import { NextResponse } from 'next/server'
import type { NextRequest } from 'next/server'

export function middleware(request: NextRequest) {
  // /admin ê²½ë¡œ ë³´í˜¸
  if (request.nextUrl.pathname.startsWith('/admin')) {
    // 1. IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ì²´í¬
    const ip = request.ip || request.headers.get('x-forwarded-for')
    const allowedIPs = process.env.ADMIN_ALLOWED_IPS?.split(',') || []
    
    if (!allowedIPs.includes(ip)) {
      return NextResponse.redirect(new URL('/403', request.url))
    }
    
    // 2. ì¸ì¦ í† í° ì²´í¬ (ì„ íƒ)
    const authToken = request.cookies.get('admin_token')
    if (!authToken) {
      return NextResponse.redirect(new URL('/login', request.url))
    }
  }
  
  return NextResponse.next()
}

export const config = {
  matcher: '/admin/:path*',
}
```

### 4.2 Phase 2: ë…ë¦½ ëŒ€ì‹œë³´ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜

#### 4.2.1 ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±
```bash
cd /Users/alan/GitHub
npx create-next-app@latest agent-admin \
  --typescript \
  --tailwind \
  --app \
  --src-dir

cd agent-admin
npx shadcn-ui@latest init

# ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸ ì„¤ì¹˜
npx shadcn-ui@latest add button card table chart
```

#### 4.2.2 í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
```bash
# agent-admin/.env.local
NEXT_PUBLIC_API_BASE_URL=https://api.wedosoft.net
NEXT_PUBLIC_ADMIN_API_KEY=admin_xxx

# IP ì œí•œ (í”„ë¡œë•ì…˜)
ADMIN_ALLOWED_IPS=203.0.113.0,203.0.113.1

# ì¸ì¦ (ì„ íƒ)
NEXTAUTH_URL=https://admin.wedosoft.net
NEXTAUTH_SECRET=xxx
```

#### 4.2.3 ë°°í¬ ì„¤ì •
```yaml
# vercel.json (agent-admin)
{
  "env": {
    "NEXT_PUBLIC_API_BASE_URL": "@api-base-url"
  },
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        {
          "key": "X-Frame-Options",
          "value": "DENY"
        },
        {
          "key": "X-Content-Type-Options",
          "value": "nosniff"
        }
      ]
    }
  ]
}
```

---

## 5. í•µì‹¬ ê¸°ëŠ¥ ì •ì˜

### 5.1 ëŒ€ì‹œë³´ë“œ (Dashboard)

**ëª©ì **: ì „ì²´ ì‹œìŠ¤í…œ í˜„í™©ì„ í•œëˆˆì— íŒŒì•…

**ì£¼ìš” ë©”íŠ¸ë¦­**:
- ì´ í™œì„± ì—ì´ì „íŠ¸ ìˆ˜
- 24ì‹œê°„ API í˜¸ì¶œ ìˆ˜
- í‰ê·  ì‘ë‹µ ì‹œê°„
- ì—ëŸ¬ìœ¨
- Gemini í† í° ì†Œë¹„ëŸ‰

**UI êµ¬ì„±**:
```typescript
// components/admin/dashboard-overview.tsx
export function DashboardOverview() {
  return (
    <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
      <MetricCard
        title="í™œì„± ì—ì´ì „íŠ¸"
        value={12}
        change="+2"
        changeType="increase"
      />
      <MetricCard
        title="24ì‹œê°„ API í˜¸ì¶œ"
        value="1,234"
        change="+15%"
        changeType="increase"
      />
      <MetricCard
        title="í‰ê·  ì‘ë‹µ ì‹œê°„"
        value="1.2s"
        change="-0.3s"
        changeType="decrease"
      />
      <MetricCard
        title="ì—ëŸ¬ìœ¨"
        value="0.5%"
        change="-0.2%"
        changeType="decrease"
      />
    </div>
  )
}
```

### 5.2 ë°°í¬ ê´€ë¦¬ (Deployments)

**ëª©ì **: ì—¬ëŸ¬ í”Œë«í¼ì— ë°°í¬ëœ ì—ì´ì „íŠ¸ ìƒíƒœ ëª¨ë‹ˆí„°ë§

**í”Œë«í¼ ìœ í˜•**:
- `homepage`: wedosoft.net/agents/*
- `slack`: Slack ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì•±
- `freshdesk`: Freshdesk ìœ„ì ¯
- `gmail`: Gmail í”ŒëŸ¬ê·¸ì¸
- `custom`: ê¸°íƒ€ ì»¤ìŠ¤í…€ í†µí•©

**ë°ì´í„° ëª¨ë¸**:
```typescript
interface Deployment {
  id: string
  platform: 'homepage' | 'slack' | 'freshdesk' | 'gmail' | 'custom'
  tenant: string
  status: 'active' | 'inactive' | 'error'
  endpoint?: string
  workspace_id?: string // Slack
  subdomain?: string // Freshdesk
  config: Record<string, any>
  created_at: string
  last_request?: string
  metrics: {
    total_requests: number
    avg_response_time: number
    error_rate: number
  }
}
```

### 5.3 í…Œë„ŒíŠ¸ ê´€ë¦¬ (Tenants)

**ëª©ì **: ê³ ê°ì‚¬ë³„ ì„¤ì • ë° ê¶Œí•œ ê´€ë¦¬

**í…Œë„ŒíŠ¸ ì†ì„±**:
```typescript
interface Tenant {
  id: string
  name: string // "SK Bioscience"
  slug: string // "sk-bioscience"
  status: 'active' | 'inactive' | 'trial'
  plan: 'free' | 'basic' | 'enterprise'
  
  // RAG ì„¤ì •
  rag_stores: string[] // ["fileSearchStores/freshworkskb..."]
  allowed_products: string[] // ["freshservice"]
  
  // ì‚¬ìš© ì œí•œ
  quota: {
    max_api_calls_per_day: number
    max_tokens_per_month: number
  }
  
  // í˜„ì¬ ì‚¬ìš©ëŸ‰
  usage: {
    api_calls_today: number
    tokens_this_month: number
  }
  
  // ë°°í¬ ì •ë³´
  deployments: Deployment[]
  
  created_at: string
  updated_at: string
}
```

### 5.4 ì‚¬ìš©ëŸ‰ ë¶„ì„ (Analytics)

**ëª©ì **: ì‹œê°„ëŒ€ë³„, í…Œë„ŒíŠ¸ë³„ ì‚¬ìš© íŒ¨í„´ ë¶„ì„

**ì°¨íŠ¸ ìœ í˜•**:
1. **Timeline Chart**: ì‹œê°„ëŒ€ë³„ API í˜¸ì¶œ
2. **Pie Chart**: í…Œë„ŒíŠ¸ë³„ ì‚¬ìš© ë¹„ìœ¨
3. **Bar Chart**: í”Œë«í¼ë³„ ë¹„êµ
4. **Heatmap**: ìš”ì¼/ì‹œê°„ëŒ€ë³„ íŒ¨í„´

**ë°ì´í„° ì†ŒìŠ¤**:
```sql
-- Supabase Query ì˜ˆì‹œ
SELECT 
  DATE_TRUNC('hour', created_at) as hour,
  tenant_id,
  COUNT(*) as request_count,
  AVG(response_time_ms) as avg_response_time
FROM sessions
WHERE created_at >= NOW() - INTERVAL '7 days'
GROUP BY hour, tenant_id
ORDER BY hour DESC
```

### 5.5 RAG Store ê´€ë¦¬ (Stores)

**ëª©ì **: ë¬¸ì„œ ì—…ë¡œë“œ, ì‚­ì œ, ìŠ¤í† ì–´ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

**ê¸°ëŠ¥**:
- ë¬¸ì„œ ì—…ë¡œë“œ (PDF, DOCX, TXT)
- ë¬¸ì„œ ì‚­ì œ
- ìŠ¤í† ì–´ ë©”íƒ€ë°ì´í„° ì¡°íšŒ
- ê²€ìƒ‰ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

**UI ì˜ˆì‹œ**:
```typescript
// app/admin/stores/[storeId]/page.tsx
export default function StoreDetailPage({ params }) {
  return (
    <div>
      <StoreHeader store={store} />
      
      <Tabs defaultValue="documents">
        <TabsList>
          <TabsTrigger value="documents">ë¬¸ì„œ</TabsTrigger>
          <TabsTrigger value="upload">ì—…ë¡œë“œ</TabsTrigger>
          <TabsTrigger value="performance">ì„±ëŠ¥</TabsTrigger>
        </TabsList>
        
        <TabsContent value="documents">
          <DocumentList storeId={params.storeId} />
        </TabsContent>
        
        <TabsContent value="upload">
          <DocumentUploader storeId={params.storeId} />
        </TabsContent>
        
        <TabsContent value="performance">
          <PerformanceMetrics storeId={params.storeId} />
        </TabsContent>
      </Tabs>
    </div>
  )
}
```

---

## 6. ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### 6.1 ì¸ì¦ ë° ì¸ê°€

**Option 1: IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸**
```typescript
// middleware.ts
const ALLOWED_IPS = [
  '203.0.113.0', // ì‚¬ë¬´ì‹¤ IP
  '198.51.100.0', // VPN IP
]

if (!ALLOWED_IPS.includes(clientIP)) {
  return new Response('Forbidden', { status: 403 })
}
```

**Option 2: NextAuth.js**
```typescript
// app/api/auth/[...nextauth]/route.ts
import NextAuth from 'next-auth'
import CredentialsProvider from 'next-auth/providers/credentials'

export const authOptions = {
  providers: [
    CredentialsProvider({
      credentials: {
        username: { label: "Username", type: "text" },
        password: { label: "Password", type: "password" }
      },
      async authorize(credentials) {
        // DBì—ì„œ ê´€ë¦¬ì ê³„ì • í™•ì¸
        const user = await verifyAdmin(credentials)
        return user
      }
    })
  ]
}
```

### 6.2 API í‚¤ ê´€ë¦¬

**Backend (agent-platform)**:
```python
# app/core/security.py
from fastapi import Security, HTTPException
from fastapi.security import APIKeyHeader

API_KEY_HEADER = APIKeyHeader(name="X-Admin-API-Key")

async def verify_admin_api_key(api_key: str = Security(API_KEY_HEADER)):
    if api_key != settings.admin_api_key:
        raise HTTPException(status_code=403, detail="Invalid API key")
    return True

# app/api/admin/deployments.py
@router.get("/", dependencies=[Depends(verify_admin_api_key)])
async def list_deployments():
    pass
```

### 6.3 CORS ì„¤ì •

```python
# app/main.py
from fastapi.middleware.cors import CORSMiddleware

app.add_middleware(
    CORSMiddleware,
    allow_origins=[
        "https://www.wedosoft.net",
        "https://admin.wedosoft.net"  # Phase 2
    ],
    allow_credentials=True,
    allow_methods=["GET", "POST", "PUT", "DELETE"],
    allow_headers=["*"],
)
```

---

## 7. ë°°í¬ ì „ëµ

### 7.1 ê°œë°œ í™˜ê²½

```bash
# Terminal 1: Backend
cd /Users/alan/GitHub/agent-platform
source venv/bin/activate
uvicorn app.main:app --port 8000 --reload

# Terminal 2: Homepage (with /admin)
cd /Users/alan/GitHub/homepage
npm run dev -- --port 3000

# Terminal 3: Admin Dashboard (Phase 2)
cd /Users/alan/GitHub/agent-admin
npm run dev -- --port 3001
```

### 7.2 í”„ë¡œë•ì…˜ ë°°í¬

**Phase 1: Homepage í†µí•©**
```
Vercel:
  - www.wedosoft.net (homepage + /admin)

Railway/Fly.io:
  - api.wedosoft.net (agent-platform)
```

**Phase 2: ë…ë¦½ ëŒ€ì‹œë³´ë“œ**
```
Vercel:
  - www.wedosoft.net (homepage only)
  - admin.wedosoft.net (agent-admin)

Railway/Fly.io:
  - api.wedosoft.net (agent-platform)
```

---

## 8. ë§ˆì´ê·¸ë ˆì´ì…˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

### 8.1 Phase 1 â†’ Phase 2 ì „í™˜ ê¸°ì¤€

- [ ] í…Œë„ŒíŠ¸ ìˆ˜ 10ê°œ ì´ìƒ
- [ ] ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ ë²ˆë“¤ í¬ê¸° > 500KB
- [ ] ë³´ì•ˆ ìš”êµ¬ì‚¬í•­ ê°•í™” (VPN í•„ìˆ˜ ë“±)
- [ ] ê´€ë¦¬ ê¸°ëŠ¥ ë³µì¡ë„ ì¦ê°€
- [ ] ë…ë¦½ì  ë°°í¬ í•„ìš”ì„± ëŒ€ë‘

### 8.2 ë§ˆì´ê·¸ë ˆì´ì…˜ ì ˆì°¨

1. **agent-admin í”„ë¡œì íŠ¸ ìƒì„±**
   ```bash
   npx create-next-app@latest agent-admin
   ```

2. **Homepageì—ì„œ /admin ì½”ë“œ ë³µì‚¬**
   ```bash
   cp -r homepage/app/admin agent-admin/app/
   cp -r homepage/components/admin agent-admin/components/
   ```

3. **API ì—”ë“œí¬ì¸íŠ¸ ë³€ê²½**
   ```typescript
   // Before (Homepage)
   const API_BASE = '/api'
   
   // After (agent-admin)
   const API_BASE = 'https://api.wedosoft.net/api'
   ```

4. **Vercel ë°°í¬ ì„¤ì •**
   ```bash
   cd agent-admin
   vercel --prod
   # Domain: admin.wedosoft.net
   ```

5. **Homepageì—ì„œ /admin ì œê±°**
   ```bash
   cd homepage
   rm -rf app/admin
   rm -rf components/admin
   ```

6. **DNS ì„¤ì •**
   ```
   admin.wedosoft.net â†’ Vercel (agent-admin)
   ```

---

## 9. ëª¨ë‹ˆí„°ë§ ë° ìš´ì˜

### 9.1 ë¡œê¹…

**Backend (agent-platform)**:
```python
# app/core/logging.py
import logging

logger = logging.getLogger("admin_api")
logger.setLevel(logging.INFO)

# app/api/admin/deployments.py
@router.get("/")
async def list_deployments():
    logger.info("Admin accessed deployment list", extra={
        "user_ip": request.client.host,
        "timestamp": datetime.utcnow()
    })
    return {...}
```

**Frontend (agent-admin)**:
```typescript
// lib/analytics.ts
export function trackAdminAction(action: string, metadata: any) {
  console.log('[Admin Action]', action, metadata)
  
  // ì„ íƒ: External analytics
  // posthog.capture(action, metadata)
}

// Usage
trackAdminAction('deployment_viewed', { platform: 'slack' })
```

### 9.2 ì•Œë¦¼

**Slack Webhook í†µí•©**:
```python
# app/services/notifications.py
import httpx

async def send_slack_alert(message: str):
    webhook_url = settings.slack_webhook_url
    await httpx.post(webhook_url, json={
        "text": f"ğŸš¨ Agent Platform Alert: {message}"
    })

# ì‚¬ìš© ì˜ˆì‹œ
if error_rate > 5:
    await send_slack_alert(f"Error rate exceeded: {error_rate}%")
```

---

## 10. í–¥í›„ í™•ì¥ ê³„íš

### 10.1 ì¶”ê°€ ê¸°ëŠ¥

1. **A/B í…ŒìŠ¤íŒ…**
   - í”„ë¡¬í”„íŠ¸ ë²„ì „ ê´€ë¦¬
   - ì„±ëŠ¥ ë¹„êµ ë¶„ì„

2. **ìë™ ìŠ¤ì¼€ì¼ë§**
   - ì‚¬ìš©ëŸ‰ ê¸°ë°˜ RAG Store ìš©ëŸ‰ ì¡°ì •
   - API ë ˆì´íŠ¸ ë¦¬ë°‹ ë™ì  ì¡°ì •

3. **ë¹„ìš© ìµœì í™”**
   - Gemini í† í° ì‚¬ìš©ëŸ‰ ì˜ˆì¸¡
   - ë¹„ìš© ì•Œë¦¼ ì„¤ì •

4. **ë©€í‹° ë¦¬ì „ ì§€ì›**
   - ê¸€ë¡œë²Œ ë°°í¬
   - ì§€ì—­ë³„ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

### 10.2 ê¸°ìˆ  ìŠ¤íƒ ê³ ë ¤ì‚¬í•­

**í˜„ì¬**:
- Frontend: Next.js + shadcn/ui
- Backend: FastAPI + Supabase
- AI: Gemini 2.0 Flash

**ë¯¸ë˜ ê²€í†  í•­ëª©**:
- GraphQL (REST ëŒ€ì²´)
- WebSocket (ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§)
- Redis (ìºì‹±)
- Prometheus + Grafana (ë©”íŠ¸ë¦­)

---

## 11. ì˜ì‚¬ê²°ì • ìš”ì•½

| í•­ëª© | ê²°ì • | ì´ìœ  |
|------|------|------|
| **ì´ˆê¸° êµ¬ì¡°** | Homepage í†µí•© (/admin) | ë¹ ë¥¸ êµ¬í˜„, ê¸°ì¡´ ì¸í”„ë¼ í™œìš© |
| **í™•ì¥ ì „ëµ** | ë‹¨ê³„ì  ë¶„ë¦¬ | í•„ìš”ì‹œ ë…ë¦½ ëŒ€ì‹œë³´ë“œë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ |
| **ì¸ì¦ ë°©ì‹** | IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ + ì„ íƒì  NextAuth | ë‹¨ìˆœí•˜ë©´ì„œ ì•ˆì „ |
| **Backend API** | FastAPI /admin/* ì—”ë“œí¬ì¸íŠ¸ | RESTful, í™•ì¥ ìš©ì´ |
| **í”„ë¡ íŠ¸ì—”ë“œ** | Next.js + shadcn/ui | Homepageì™€ ì¼ê´€ì„± |
| **ë°°í¬** | Vercel (Frontend) + Railway (Backend) | ê´€ë¦¬ í¸ì˜ì„± |

---

## 12. ì°¸ê³  ìë£Œ

### 12.1 ê´€ë ¨ ë¬¸ì„œ
- [Agent Platform README](../README.md)
- [API Documentation](../API_REFERENCE.md)
- [Deployment Guide](../DEPLOYMENT.md)

### 12.2 ì™¸ë¶€ ë§í¬
- [Next.js Documentation](https://nextjs.org/docs)
- [shadcn/ui Components](https://ui.shadcn.com)
- [FastAPI Best Practices](https://fastapi.tiangolo.com/tutorial/bigger-applications/)
- [Vercel Deployment](https://vercel.com/docs)

---

## ë³€ê²½ ì´ë ¥

| ë‚ ì§œ | ë²„ì „ | ë³€ê²½ ë‚´ìš© | ì‘ì„±ì |
|------|------|----------|--------|
| 2025-11-22 | 1.0 | ì´ˆì•ˆ ì‘ì„± | Agent Platform Team |

